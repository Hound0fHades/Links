<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hound Of Hades</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Satisfy&family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">

  <style>
    :root {
      /* Base (dark) */
      --bg-overlay: rgba(0,0,0,.55);
      --card-bg: rgba(0,0,0,.55);
      --card-blur: 12px;
      --border: rgba(255,255,255,.16);
      --text: #ffffff;
      --muted: rgba(255,255,255,.78);
      --muted2: rgba(255,255,255,.62);

      /* Seasonal accents (auto-swapped by JS) */
      --accent: #e53935;
      --accent2: #ffb300;

      /* Button */
      --btn: rgba(0,0,0,.65);

      /* Glow */
      --glow: rgba(255,255,255,.18);
      --glow-strong: rgba(255, 180, 0, .24);

      /* Background image (YOU REQUESTED THIS NAME) */
      --bg-image: url("cerberuslinkbackground.png");

      /* Profile image (YOU REQUESTED THIS NAME) */
      --avatar-border: rgba(255,255,255,.95);

      /* Tabs */
      --tab-bg: rgba(0,0,0,.30);
      --tab-active: rgba(255,255,255,.10);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      color: var(--text);
      background:
        linear-gradient(var(--bg-overlay), var(--bg-overlay)),
        var(--bg-image);
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 15px;
      position: relative;
      overflow-x: hidden;
    }

    /* Subtle animated "sigils" across the whole page */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: .22;
      mix-blend-mode: screen;
      background:
        radial-gradient(circle at 20% 25%, rgba(255,255,255,.10) 0 2px, transparent 3px),
        radial-gradient(circle at 75% 35%, rgba(255,255,255,.09) 0 2px, transparent 3px),
        radial-gradient(circle at 50% 70%, rgba(255,255,255,.08) 0 2px, transparent 3px),
        conic-gradient(from 120deg at 50% 50%, rgba(255,255,255,.07), transparent 20%, rgba(255,255,255,.05), transparent 45%, rgba(255,255,255,.06), transparent 75%);
      filter: blur(.2px);
      animation: sigilDrift 14s linear infinite;
      transform: translateZ(0);
    }

    @keyframes sigilDrift{
      0% { transform: translate3d(0,0,0) rotate(0deg); }
      50% { transform: translate3d(0,-10px,0) rotate(8deg); }
      100% { transform: translate3d(0,0,0) rotate(0deg); }
    }

    .card {
      width: 100%;
      max-width: 560px;
      background: var(--card-bg);
      backdrop-filter: blur(var(--card-blur));
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 18px 18px 24px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    /* Accent glow rim (seasonal) */
    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(circle at 15% 15%, rgba(255,255,255,.10), transparent 45%),
        radial-gradient(circle at 90% 10%, color-mix(in srgb, var(--accent2) 30%, transparent), transparent 55%),
        radial-gradient(circle at 40% 95%, color-mix(in srgb, var(--accent) 26%, transparent), transparent 55%);
      opacity: .65;
      pointer-events:none;
    }

    /* Floating sigils inside the card */
    .sigils {
      position: absolute;
      inset: 0;
      pointer-events: none;
      opacity: .16;
      filter: blur(.15px);
    }

    .sigils::before,
    .sigils::after{
      content:"";
      position:absolute;
      width: 520px;
      height: 520px;
      border-radius: 50%;
      left: 50%;
      top: 50%;
      transform: translate(-50%,-50%);
      background:
        conic-gradient(from 0deg,
          transparent 0 14%,
          rgba(255,255,255,.18) 14% 15%,
          transparent 15% 28%,
          rgba(255,255,255,.14) 28% 29%,
          transparent 29% 46%,
          rgba(255,255,255,.16) 46% 47%,
          transparent 47% 66%,
          rgba(255,255,255,.12) 66% 67%,
          transparent 67% 100%);
      animation: spinSigil 22s linear infinite;
    }

    .sigils::after{
      width: 380px;
      height: 380px;
      opacity: .9;
      background:
        conic-gradient(from 90deg,
          transparent 0 18%,
          rgba(255,255,255,.12) 18% 19%,
          transparent 19% 41%,
          rgba(255,255,255,.10) 41% 42%,
          transparent 42% 68%,
          rgba(255,255,255,.11) 68% 69%,
          transparent 69% 100%);
      animation-duration: 30s;
      animation-direction: reverse;
    }

    @keyframes spinSigil {
      from { transform: translate(-50%,-50%) rotate(0deg); }
      to   { transform: translate(-50%,-50%) rotate(360deg); }
    }

    /* Music toggle (kept, no Dark/Light or Mythic controls) */
    .music-btn{
      position: absolute;
      top: 14px;
      right: 14px;
      width: 44px;
      height: 44px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.28);
      color: var(--text);
      cursor: pointer;
      display: grid;
      place-items: center;
      transition: transform .18s ease, box-shadow .22s ease, background .22s ease;
      z-index: 2;
    }
    .music-btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 12px 26px rgba(0,0,0,.28);
      background: rgba(0,0,0,.36);
    }
    .music-btn i{ font-size: 22px; }

    .avatar {
      width: 118px;
      height: 118px;
      border-radius: 50%;
      border: 3px solid var(--avatar-border);
      object-fit: cover;
      margin: 22px auto 12px;
      display: block;
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
      position: relative;
      z-index: 1;
    }

    h1 {
      font-family: 'Satisfy', cursive;
      font-size: 2.35rem;
      margin: 0 0 6px;
      letter-spacing: .3px;
      position: relative;
      z-index: 1;
    }

    .tagline {
      font-size: .92rem;
      color: var(--muted2);
      margin: 0 0 14px;
      position: relative;
      z-index: 1;
    }

    .season-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight: 900;
      font-size: .78rem;
      letter-spacing: .2px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.22);
      margin: 0 0 14px;
      position: relative;
      z-index: 1;
    }

    .season-dot{
      width:10px;height:10px;border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 0 3px rgba(255,255,255,.08);
    }

    .socials {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin-bottom: 16px;
      position: relative;
      z-index: 1;
    }

    .socials a {
      color: inherit;
      font-size: 26px;
      transition: transform .2s ease, opacity .2s ease;
    }
    .socials a:hover { transform: translateY(-3px); opacity: .86; }

    /* Tabs */
    .tabs {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 10px 0 16px;
      position: relative;
      z-index: 1;
    }

    .tab {
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: var(--tab-bg);
      color: var(--text);
      cursor: pointer;
      font-weight: 800;
      font-size: .9rem;
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease;
    }

    .tab:hover { transform: translateY(-1px); box-shadow: 0 10px 22px rgba(0,0,0,.14); }
    .tab.active { background: var(--tab-active); }

    /* Panels */
    .panel { display: none; text-align: left; position: relative; z-index: 1; }
    .panel.active { display: block; }

    .section-card {
      background: rgba(0,0,0,.25);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 14px 14px;
      margin-bottom: 14px;
    }

    .section-title {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      font-weight: 900;
      margin: 0 0 10px;
      text-align: left;
    }

    /* About collapsible */
    details.about {
      border-radius: 14px;
      padding: 12px 12px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,.22);
    }

    details.about summary {
      list-style: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-weight: 900;
      user-select: none;
    }
    details.about summary::-webkit-details-marker { display: none; }

    .summary-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .chevron {
      transition: transform .25s ease;
      animation: bounce 1.6s infinite;
      font-size: 22px;
    }
    details[open] .chevron { transform: rotate(180deg); animation: none; }

    .readmore {
      font-size: .82rem;
      color: var(--muted2);
      font-weight: 800;
      margin-left: 8px;
    }

    details[open] .readmore::after { content: "Read less"; }
    details:not([open]) .readmore::after { content: "Read more"; }

    @keyframes bounce {
      0%,100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }

    .about p {
      margin: 12px 0 0;
      font-size: .95rem;
      line-height: 1.58;
      color: var(--muted);
    }

    /* Links */
    .links {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .link-btn {
      position: relative;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      padding: 14px 16px;
      border-radius: 999px;
      background: var(--btn);
      color: inherit;
      text-decoration: none;
      font-weight: 900;
      border: 1px solid var(--border);
      transition: transform .18s ease, box-shadow .25s ease, border-color .25s ease;
      overflow: hidden;
    }

    /* Hover glow (kept) */
    .link-btn::before {
      content: "";
      position: absolute;
      inset: -2px;
      background:
        radial-gradient(circle at 30% 30%, color-mix(in srgb, var(--accent2) 40%, transparent), transparent 45%),
        radial-gradient(circle at 70% 70%, color-mix(in srgb, var(--accent) 30%, transparent), transparent 55%),
        radial-gradient(circle at 50% 50%, rgba(255,255,255,.10), transparent 60%);
      opacity: 0;
      transition: opacity .25s ease;
      pointer-events: none;
    }

    .link-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 30px rgba(0,0,0,.25);
      border-color: rgba(255,255,255,.25);
    }
    .link-btn:hover::before { opacity: 1; }

    .link-left {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      z-index: 1;
    }

    .hint {
      font-size: .85rem;
      color: var(--muted2);
      margin: 8px 0 0;
    }

    footer {
      margin-top: 10px;
      text-align: center;
      font-size: .75rem;
      color: rgba(255,255,255,.6);
      position: relative;
      z-index: 1;
    }

    /* Modal (shared) */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.65);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 9999;
    }

    .modal {
      width: 100%;
      max-width: 430px;
      border-radius: 18px;
      background: rgba(15, 12, 20, .85);
      border: 1px solid rgba(255,255,255,.18);
      backdrop-filter: blur(14px);
      padding: 18px 16px;
      box-shadow: 0 18px 45px rgba(0,0,0,.35);
      animation: popIn .22s ease-out;
      color: #fff;
    }

    @keyframes popIn {
      from { transform: translateY(8px) scale(.98); opacity: 0; }
      to   { transform: translateY(0) scale(1); opacity: 1; }
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .modal-title {
      font-weight: 900;
      font-size: 1.05rem;
    }

    .close-x {
      background: transparent;
      border: none;
      cursor: pointer;
      font-size: 22px;
      color: inherit;
      opacity: .8;
      transition: transform .15s ease, opacity .15s ease;
    }
    .close-x:hover { transform: rotate(6deg); opacity: 1; }

    .modal p {
      margin: 8px 0 12px;
      line-height: 1.45;
      color: rgba(255,255,255,.82);
    }

    .field-row {
      display: grid;
      gap: 10px;
      margin: 12px 0 10px;
    }

    .field-row label {
      font-size: .85rem;
      font-weight: 900;
      opacity: .92;
    }

    input[type="date"], input[type="password"]{
      width: 100%;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.08);
      color: inherit;
      font-family: inherit;
      font-weight: 700;
      outline: none;
    }

    .modal-actions {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .btn {
      flex: 1;
      border: none;
      cursor: pointer;
      border-radius: 12px;
      padding: 12px 12px;
      font-weight: 900;
      transition: transform .15s ease, box-shadow .2s ease;
    }

    .btn.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #0b0b0f;
    }

    .btn.ghost {
      background: rgba(255,255,255,.10);
      color: inherit;
      border: 1px solid rgba(255,255,255,.18);
    }

    .btn:hover { transform: translateY(-1px); box-shadow: 0 14px 30px rgba(0,0,0,.20); }

    .error {
      display: none;
      margin-top: 10px;
      font-weight: 900;
      font-size: .9rem;
      color: #ff6b6b;
      animation: shake .25s ease;
    }

    @keyframes shake {
      0%,100% { transform: translateX(0); }
      25% { transform: translateX(-6px); }
      50% { transform: translateX(6px); }
      75% { transform: translateX(-4px); }
    }

    @media (max-width: 480px) {
      body { padding: 26px 12px; }
      h1 { font-size: 2.05rem; }
      .tabs { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <main class="card">
    <div class="sigils" aria-hidden="true"></div>

    <!-- Music toggle -->
    <button class="music-btn" id="musicToggle" type="button" aria-label="Toggle music">
      <i class="bx bx-music"></i>
    </button>

    <!-- Put your music file in the same folder as this HTML and name it: theme.mp3
         Or change src below to your preferred file. -->
    <audio id="bgMusic" preload="none" loop>
      <source src="theme.mp3" type="audio/mpeg">
    </audio>

    <img
      class="avatar"
      src="houndsprofile.jpg"
      alt="Hound Of Hades"
    />

    <h1>Hound Of Hades</h1>
    <p class="tagline">Fantasy • Crafting • Culinary Adventures • Cosplay</p>

    <div class="season-pill" id="seasonPill" title="Auto-updates with the Wheel of the Year">
      <span class="season-dot" aria-hidden="true"></span>
      <span id="seasonName">Seasonal</span>
    </div>

    <div class="socials">
      <a href="https://www.instagram.com/hound.0f.hades" target="_blank" rel="noopener" aria-label="Instagram">
        <i class="bx bxl-instagram"></i>
      </a>
      <a href="https://www.tiktok.com/@hound..of..hades" target="_blank" rel="noopener" aria-label="TikTok">
        <i class="bx bxl-tiktok"></i>
      </a>
      <a href="https://x.com/Hound_0f_Hades" target="_blank" rel="noopener" aria-label="X / Twitter">
        <i class="fa-brands fa-x-twitter"></i>
      </a>
    </div>

    <!-- Tabs -->
    <div class="tabs" role="tablist" aria-label="Sections">
      <button class="tab active" data-tab="links" type="button">Links</button>
      <button class="tab" data-tab="about" type="button">About</button>
      <button class="tab" data-tab="support" type="button">Support</button>
    </div>

    <!-- PANELS -->
    <section class="panel active" id="panel-links">
      <div class="section-card">
        <div class="section-title">
          <span>Featured</span>
          <span class="hint">Tap a link — glow is intentional ✨</span>
        </div>

        <div class="links">
          <!-- FetLife (DOB gated) -->
          <a class="link-btn" href="https://fetlife.com/Hound0fHades"
             target="_blank" rel="noopener"
             data-dob-gated="true">
            <span class="link-left">
              <i class="bx bx-lock-alt"></i>
              <span>FetLife</span>
            </span>
            <i class="bx bx-right-arrow-alt" aria-hidden="true"></i>
          </a>

          <!-- Snapchat (PASSWORD gated: "I Bite") -->
          <a class="link-btn" href="https://www.snapchat.com/add/hound0fhades"
             target="_blank" rel="noopener"
             data-pass-gated="true">
            <span class="link-left">
              <i class="bx bxl-snapchat"></i>
              <span>Snapchat</span>
            </span>
            <i class="bx bx-right-arrow-alt" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </section>

    <section class="panel" id="panel-about">
      <div class="section-card">
        <div class="section-title">
          <span>About</span>
          <span class="hint">Short + sweet, expandable</span>
        </div>

        <details class="about">
          <summary>
            <span class="summary-left">
              <i class="bx bx-book-heart"></i>
              <span>About Me</span>
              <span class="readmore"></span>
            </span>
            <i class="bx bx-chevron-down chevron"></i>
          </summary>

          <p>
            As a true bibliophile, I find immense joy in fantasy worlds—whether through reading or audiobooks.
            My passions extend far beyond the literary realm: I’m an avid crafter, curious explorer, and enthusiastic
            seeker of new culinary experiences.
            <br><br>
            Travel fuels my spirit, both near and far, with Ireland, Scotland, and Greece at the top of my dream list—
            inspired especially by a deep fascination with Greek mythology. Over the past year, I’ve also stepped into
            the world of cosplay, creating outfits that have been an absolute delight.
            <br><br>
            Beyond all creative pursuits, spending meaningful time with my partner, loved ones, and friends brings
            me the greatest joy and fulfillment.
          </p>
        </details>
      </div>
    </section>

    <section class="panel" id="panel-support">
      <div class="section-card">
        <div class="section-title">
          <span>Support</span>
          <span class="hint">Everything in one place</span>
        </div>

        <div class="links">
          <a class="link-btn" href="https://cash.app/$Hound0fHades" target="_blank" rel="noopener">
            <span class="link-left"><i class="bx bxs-wallet"></i><span>CashApp</span></span>
            <i class="bx bx-right-arrow-alt" aria-hidden="true"></i>
          </a>

          <a class="link-btn" href="https://venmo.com/code?user_id=4332566748333514766" target="_blank" rel="noopener">
            <span class="link-left"><i class="bx bx-dollar-circle"></i><span>Venmo</span></span>
            <i class="bx bx-right-arrow-alt" aria-hidden="true"></i>
          </a>

          <a class="link-btn" href="https://www.amazon.com/hz/wishlist/ls/2FX1Z68HYLD7Q" target="_blank" rel="noopener">
            <span class="link-left"><i class="bx bx-gift"></i><span>Jewelry Wishlist</span></span>
            <i class="bx bx-right-arrow-alt" aria-hidden="true"></i>
          </a>

          <a class="link-btn" href="https://www.amazon.com/hz/wishlist/ls/G7B3W3YZACIY" target="_blank" rel="noopener">
            <span class="link-left"><i class="bx bx-heart"></i><span>Desires Wishlist</span></span>
            <i class="bx bx-right-arrow-alt" aria-hidden="true"></i>
          </a>
        </div>
      </div>
    </section>

    <footer>© Hound Of Hades</footer>
  </main>

  <!-- DOB Gate Modal (FetLife) -->
  <div class="modal-overlay" id="dobModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="dobTitle">
      <div class="modal-header">
        <div class="modal-title" id="dobTitle">Age Check (18+)</div>
        <button class="close-x" id="dobClose" type="button" aria-label="Close"><i class="bx bx-x"></i></button>
      </div>

      <p>This link is for adults only. Please confirm you are <strong>18+</strong> by entering your date of birth.</p>

      <div class="field-row">
        <label for="dobInput">Date of birth</label>
        <input id="dobInput" type="date" />
      </div>

      <div class="modal-actions">
        <button class="btn ghost" id="dobCancel" type="button">Cancel</button>
        <button class="btn primary" id="dobSubmit" type="button">Continue</button>
      </div>

      <div class="error" id="dobError">Sorry — you must be 18 or older.</div>
    </div>
  </div>

  <!-- Password Gate Modal (Snapchat) -->
  <div class="modal-overlay" id="passModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="passTitle">
      <div class="modal-header">
        <div class="modal-title" id="passTitle">Password Required</div>
        <button class="close-x" id="passClose" type="button" aria-label="Close"><i class="bx bx-x"></i></button>
      </div>

      <p>Enter the password to open Snapchat.</p>

      <div class="field-row">
        <label for="passInput">Password</label>
        <input id="passInput" type="password" autocomplete="off" />
      </div>

      <div class="modal-actions">
        <button class="btn ghost" id="passCancel" type="button">Cancel</button>
        <button class="btn primary" id="passSubmit" type="button">Continue</button>
      </div>

      <div class="error" id="passError">Wrong password.</div>
    </div>
  </div>

  <script>
    // -----------------------------
    // Tabs
    // -----------------------------
    const tabs = document.querySelectorAll('.tab');
    const panels = {
      links: document.getElementById('panel-links'),
      about: document.getElementById('panel-about'),
      support: document.getElementById('panel-support'),
    };

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const target = tab.dataset.tab;

        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        Object.values(panels).forEach(p => p.classList.remove('active'));
        panels[target].classList.add('active');
      });
    });

    // -----------------------------
    // Seasonal Pagan color shifts (Wheel of the Year)
    // -----------------------------
    const seasonNameEl = document.getElementById('seasonName');

    function ymd(d){ return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`; }

    function setThemeVars({accent, accent2, overlay, cardBg, btnBg, glowStrong}) {
      const root = document.documentElement.style;
      root.setProperty('--accent', accent);
      root.setProperty('--accent2', accent2);
      root.setProperty('--bg-overlay', overlay);
      root.setProperty('--card-bg', cardBg);
      root.setProperty('--btn', btnBg);
      root.setProperty('--glow-strong', glowStrong);
    }

    function getWheelTheme(now = new Date()) {
      const y = now.getFullYear();

      // Approximate sabbat anchors (common dates)
      const sabbats = [
        { key: 'Imbolc',     date: new Date(y, 1, 1),  accent:'#8dd6ff', accent2:'#ffffff', overlay:'rgba(0,0,0,.48)', card:'rgba(0,0,0,.52)', btn:'rgba(0,0,0,.62)', glow:'rgba(141,214,255,.26)' },
        { key: 'Ostara',     date: new Date(y, 2, 20), accent:'#6dd6a5', accent2:'#d7ffea', overlay:'rgba(0,0,0,.46)', card:'rgba(0,0,0,.50)', btn:'rgba(0,0,0,.62)', glow:'rgba(109,214,165,.24)' },
        { key: 'Beltane',    date: new Date(y, 4, 1),  accent:'#ff4d6d', accent2:'#ffd166', overlay:'rgba(0,0,0,.47)', card:'rgba(0,0,0,.52)', btn:'rgba(0,0,0,.64)', glow:'rgba(255,77,109,.22)' },
        { key: 'Litha',      date: new Date(y, 5, 21), accent:'#ffb300', accent2:'#fff0b3', overlay:'rgba(0,0,0,.45)', card:'rgba(0,0,0,.50)', btn:'rgba(0,0,0,.62)', glow:'rgba(255,179,0,.24)' },
        { key: 'Lughnasadh', date: new Date(y, 7, 1),  accent:'#f97316', accent2:'#ffd3a5', overlay:'rgba(0,0,0,.48)', card:'rgba(0,0,0,.52)', btn:'rgba(0,0,0,.64)', glow:'rgba(249,115,22,.22)' },
        { key: 'Mabon',      date: new Date(y, 8, 22), accent:'#b08968', accent2:'#ffd6a5', overlay:'rgba(0,0,0,.50)', card:'rgba(0,0,0,.54)', btn:'rgba(0,0,0,.66)', glow:'rgba(176,137,104,.22)' },
        { key: 'Samhain',    date: new Date(y, 9, 31), accent:'#a855f7', accent2:'#f97316', overlay:'rgba(0,0,0,.56)', card:'rgba(0,0,0,.58)', btn:'rgba(0,0,0,.68)', glow:'rgba(168,85,247,.22)' },
        { key: 'Yule',       date: new Date(y, 11, 21),accent:'#60a5fa', accent2:'#d4af37', overlay:'rgba(0,0,0,.54)', card:'rgba(0,0,0,.56)', btn:'rgba(0,0,0,.68)', glow:'rgba(96,165,250,.20)' },
      ];

      // Find most recent sabbat anchor (wrap to previous year if needed)
      const sorted = sabbats.slice().sort((a,b) => a.date - b.date);
      let chosen = sorted[0];

      for (const s of sorted) {
        if (now >= s.date) chosen = s;
      }

      // If we're before Imbolc (Feb 1), treat as Yule season (previous Dec 21)
      if (now < sorted[0].date) {
        chosen = { ...sorted.find(s => s.key === 'Yule'), date: new Date(y-1, 11, 21) };
      }

      return chosen;
    }

    function applyWheelTheme() {
      const theme = getWheelTheme(new Date());
      seasonNameEl.textContent = theme.key;

      setThemeVars({
        accent: theme.accent,
        accent2: theme.accent2,
        overlay: theme.overlay,
        cardBg: theme.card,
        btnBg: theme.btn,
        glowStrong: theme.glow
      });

      // Tiny cache so it doesn’t “pop” on refresh during the same day
      localStorage.setItem('hoh_wheel_last', JSON.stringify({ day: ymd(new Date()), key: theme.key }));
    }

    applyWheelTheme();

    // Refresh once per day (soft)
    setInterval(() => {
      const cached = localStorage.getItem('hoh_wheel_last');
      const today = ymd(new Date());
      if (!cached) return applyWheelTheme();
      try {
        const parsed = JSON.parse(cached);
        if (parsed.day !== today) applyWheelTheme();
      } catch { applyWheelTheme(); }
    }, 60 * 1000);

    // -----------------------------
    // Music toggle
    // -----------------------------
    const musicToggle = document.getElementById('musicToggle');
    const bgMusic = document.getElementById('bgMusic');

    function setMusicState(on) {
      localStorage.setItem('hoh_music', on ? 'on' : 'off');
      const icon = musicToggle.querySelector('i');
      icon.className = on ? 'bx bx-volume-full' : 'bx bx-volume-mute';
    }

    async function startMusic() {
      try {
        await bgMusic.play();
        setMusicState(true);
      } catch {
        // Autoplay may be blocked until user taps — that’s normal on mobile.
        setMusicState(false);
      }
    }

    function stopMusic() {
      bgMusic.pause();
      bgMusic.currentTime = 0;
      setMusicState(false);
    }

    const savedMusic = localStorage.getItem('hoh_music');
    if (savedMusic === 'on') {
      // Try to resume if browser allows; otherwise it’ll switch back off.
      startMusic();
    } else {
      setMusicState(false);
    }

    musicToggle.addEventListener('click', async () => {
      if (bgMusic.paused) await startMusic();
      else stopMusic();
    });

    // -----------------------------
    // DOB Gate (FetLife) - remembers success 24h
    // -----------------------------
    const dobModal = document.getElementById('dobModal');
    const dobInput = document.getElementById('dobInput');
    const dobError = document.getElementById('dobError');
    const dobClose = document.getElementById('dobClose');
    const dobCancel = document.getElementById('dobCancel');
    const dobSubmit = document.getElementById('dobSubmit');

    let pendingDobHref = null;

    function openDobModal(href) {
      pendingDobHref = href;
      dobError.style.display = 'none';
      dobInput.value = '';
      dobModal.style.display = 'flex';
      dobModal.setAttribute('aria-hidden', 'false');
      setTimeout(() => dobInput.focus(), 50);
    }

    function closeDobModal() {
      dobModal.style.display = 'none';
      dobModal.setAttribute('aria-hidden', 'true');
      pendingDobHref = null;
    }

    function calculateAge(dob) {
      const today = new Date();
      let age = today.getFullYear() - dob.getFullYear();
      const m = today.getMonth() - dob.getMonth();
      if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) age--;
      return age;
    }

    function hasRecentDobApproval() {
      const stamp = localStorage.getItem('hoh_dob_ok_until');
      if (!stamp) return false;
      return Date.now() < Number(stamp);
    }

    function setDobApproval24h() {
      const until = Date.now() + (24 * 60 * 60 * 1000);
      localStorage.setItem('hoh_dob_ok_until', String(until));
    }

    document.querySelectorAll('a[data-dob-gated="true"]').forEach(a => {
      a.addEventListener('click', (e) => {
        if (hasRecentDobApproval()) return;
        e.preventDefault();
        openDobModal(a.href);
      });
    });

    function handleDobSubmit() {
      if (!dobInput.value) {
        dobError.textContent = "Please enter your date of birth.";
        dobError.style.display = 'block';
        return;
      }

      const dob = new Date(dobInput.value);
      const age = calculateAge(dob);

      if (age >= 18) {
        setDobApproval24h();
        closeDobModal();
        if (pendingDobHref) window.open(pendingDobHref, "_blank", "noopener");
      } else {
        dobError.textContent = "Sorry — you must be 18 or older.";
        dobError.style.display = 'block';
        dobError.style.animation = 'none';
        void dobError.offsetWidth;
        dobError.style.animation = '';
      }
    }

    dobSubmit.addEventListener('click', handleDobSubmit);
    dobCancel.addEventListener('click', closeDobModal);
    dobClose.addEventListener('click', closeDobModal);

    dobModal.addEventListener('click', (e) => {
      if (e.target === dobModal) closeDobModal();
    });

    // -----------------------------
    // Password Gate (Snapchat) - password: "I Bite" (remembers 24h)
    // -----------------------------
    const PASS_PHRASE = "I Bite"; // exact phrase

    const passModal  = document.getElementById('passModal');
    const passInput  = document.getElementById('passInput');
    const passError  = document.getElementById('passError');
    const passClose  = document.getElementById('passClose');
    const passCancel = document.getElementById('passCancel');
    const passSubmit = document.getElementById('passSubmit');

    let pendingPassHref = null;

    function openPassModal(href) {
      pendingPassHref = href;
      passError.style.display = 'none';
      passInput.value = '';
      passModal.style.display = 'flex';
      passModal.setAttribute('aria-hidden', 'false');
      setTimeout(() => passInput.focus(), 50);
    }

    function closePassModal() {
      passModal.style.display = 'none';
      passModal.setAttribute('aria-hidden', 'true');
      pendingPassHref = null;
    }

    function hasRecentPassApproval() {
      const stamp = localStorage.getItem('hoh_pass_ok_until');
      return stamp && Date.now() < Number(stamp);
    }

    function setPassApproval24h() {
      localStorage.setItem('hoh_pass_ok_until', String(Date.now() + 24 * 60 * 60 * 1000));
    }

    document.querySelectorAll('a[data-pass-gated="true"]').forEach(a => {
      a.addEventListener('click', (e) => {
        if (hasRecentPassApproval()) return;
        e.preventDefault();
        openPassModal(a.href);
      });
    });

    function handlePassSubmit() {
      const entered = (passInput.value || "").trim();

      if (!entered) {
        passError.textContent = "Please enter the password.";
        passError.style.display = 'block';
        return;
      }

      if (entered === PASS_PHRASE) {
        setPassApproval24h();
        closePassModal();
        if (pendingPassHref) window.open(pendingPassHref, "_blank", "noopener");
      } else {
        passError.textContent = "Wrong password.";
        passError.style.display = 'block';
        passError.style.animation = 'none';
        void passError.offsetWidth;
        passError.style.animation = '';
      }
    }

    passSubmit.addEventListener('click', handlePassSubmit);
    passCancel.addEventListener('click', closePassModal);
    passClose.addEventListener('click', closePassModal);

    passModal.addEventListener('click', (e) => {
      if (e.target === passModal) closePassModal();
    });

    // Shared Esc/Enter handling (works for whichever modal is open)
    document.addEventListener('keydown', (e) => {
      const dobOpen  = dobModal.style.display === 'flex';
      const passOpen = passModal.style.display === 'flex';

      if ((dobOpen || passOpen) && e.key === 'Escape') {
        if (dobOpen) closeDobModal();
        if (passOpen) closePassModal();
      }

      if ((dobOpen || passOpen) && e.key === 'Enter') {
        if (dobOpen) handleDobSubmit();
        if (passOpen) handlePassSubmit();
      }
    });
  </script>
</body>
</html>
